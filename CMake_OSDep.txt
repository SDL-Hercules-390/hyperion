#
# OS-specific checks and flags
#

# Enable IPv6 by default, overrule for individual OS
set (ENABLE_IPV6 1)

# Apple-specific fixes
if (APPLE)
  set (PTHREAD_SET_NAME_ONLY 1)
endif()

# Windows-based defines
if (WIN32)
  set(IS_WINDOWS 1)
  set(CMAKE_C_FLAGS  "${CMAKE_C_FLAGS} -D_MSVC_" )
  set(OPTION_FTHREADS 1)
  set(NO_SIGABEND_HANDLER 1)
endif()

# Check if required to link with libm
check_include_file(libm/math.h HAVE_LIBM_MATH_H)
check_library_exists(m log "/lib;/usr/lib;/usr/local/lib" HAVE_M_LIB)
if (HAVE_M_LIB)
    set(LIBM_REQUIRED 1)
    message( STATUS "Linking with libm IS required" )
else (HAVE_M_LIB)
    message( STATUS "Linking with libm IS NOT required")
endif (HAVE_M_LIB)

# Store host's architecture
set(HOST_ARCH "${CMAKE_HOST_SYSTEM_PROCESSOR}")
