#
# OS-specific checks and flags
#

# Enable IPv6 by default, overrule for individual OS
set (ENABLE_IPV6 1)

# Apple-specific fixes
if (APPLE)
  set (PTHREAD_SET_NAME_ONLY 1)
endif()

# Windows-based defines
if (WIN32)
  set(IS_WINDOWS 1)
endif()

# Check to see if needs to be linked with libm (e.g. on Linux)
CHECK_FUNCTION_EXISTS(pow RESULT)
if(NOT RESULT)
  unset(RESULT)
  list(APPEND CMAKE_REQUIRED_LIBRARIES m)
  CHECK_FUNCTION_EXISTS(pow RESULT)
  if(RESULT)
    target_link_libraries(yourtarget m)
  else()
    message(FATAL_ERROR "No pow() found")
  endif()
endif()

# Store host's architecture
set(HOST_ARCH "${CMAKE_HOST_SYSTEM_PROCESSOR}")
